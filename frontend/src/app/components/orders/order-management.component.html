<div class="admin-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="breadcrumb">
      <span class="breadcrumb-item">Dashboard</span>
      <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
      <span class="breadcrumb-item current">Orders List</span>
    </div>
    <h1 class="page-title">Orders List</h1>
    <p class="page-subtitle">Here you can find all of your Orders</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ stats.totalOrders | number }}</div>
        <div class="stat-label">Total Orders</div>
        <div class="stat-period">Total Orders last 365 days</div>
      </div>
      <div class="stat-icon total">
        <mat-icon>receipt_long</mat-icon>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ stats.newOrders | number }}</div>
        <div class="stat-label">New Orders</div>
        <div class="stat-period">New Orders last 365 days</div>
      </div>
      <div class="stat-icon new">
        <mat-icon>add_circle</mat-icon>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ stats.completedOrders | number }}</div>
        <div class="stat-label">Completed Orders</div>
        <div class="stat-period">Completed Order last 365 days</div>
      </div>
      <div class="stat-icon completed">
        <mat-icon>check_circle</mat-icon>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-number">{{ stats.cancelledOrders | number }}</div>
        <div class="stat-label">Cancelled Orders</div>
        <div class="stat-period">Cancelled Order last 365 days</div>
      </div>
      <div class="stat-icon cancelled">
        <mat-icon>cancel</mat-icon>
      </div>
    </div>
  </div>

  <!-- Action Bar -->
  <div class="action-bar">
    <div class="search-section">
      <div class="search-box">
        <mat-icon class="search-icon">search</mat-icon>
        <input 
          type="text" 
          placeholder="Search by name, Order ID..." 
          [formControl]="searchControl"
          class="search-input"
        >
      </div>
    </div>
    
    <div class="actions">
      <div class="date-range">
        <mat-form-field appearance="outline" class="date-field">
          <mat-label>From</mat-label>
          <input matInput [matDatepicker]="fromPicker" [(ngModel)]="filters.fromDate" (dateChange)="applyFilters()">
          <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
          <mat-datepicker #fromPicker></mat-datepicker>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="date-field">
          <mat-label>To</mat-label>
          <input matInput [matDatepicker]="toPicker" [(ngModel)]="filters.toDate" (dateChange)="applyFilters()">
          <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
          <mat-datepicker #toPicker></mat-datepicker>
        </mat-form-field>
      </div>
      
      <mat-form-field appearance="outline" class="status-filter">
        <mat-label>All Status</mat-label>
        <mat-select [(value)]="filters.status" (selectionChange)="applyFilters()">
          <mat-option value="">All Status</mat-option>
          <mat-option value="PENDING">Pending</mat-option>
          <mat-option value="CONFIRMED">Confirmed</mat-option>
          <mat-option value="PROCESSING">Processing</mat-option>
          <mat-option value="SHIPPED">Shipped</mat-option>
          <mat-option value="DELIVERED">Delivered</mat-option>
          <mat-option value="CANCELLED">Cancelled</mat-option>
          <mat-option value="REFUNDED">Refunded</mat-option>
        </mat-select>
      </mat-form-field>
      
      <button mat-icon-button class="filter-btn" [matMenuTriggerFor]="filterMenu">
        <mat-icon>filter_list</mat-icon>
      </button>
      <mat-menu #filterMenu="matMenu">
        <button mat-menu-item (click)="clearFilters()">
          <mat-icon>clear</mat-icon>
          Clear Filters
        </button>
      </mat-menu>
      
      <button mat-raised-button color="primary" (click)="addOrder()" class="add-btn">
        <mat-icon>add</mat-icon>
        Add Order
      </button>
    </div>
  </div>

  <!-- Orders Table -->
  <div class="data-table-container">
    <table mat-table [dataSource]="dataSource" matSort class="orders-table">
      <!-- Product Name Column -->
      <ng-container matColumnDef="productName">
        <th mat-header-cell *matHeaderCellDef>Product Name</th>
        <td mat-cell *matCellDef="let order">
          <div class="product-info">
            <img [src]="getOrderProductImage(order)" [alt]="getOrderProductName(order)" class="product-image">
            <div class="product-details">
              <div class="product-name">{{ getOrderProductName(order) }}</div>
              <div class="product-category">{{ getOrderProductCategory(order) }}</div>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Customer Name Column -->
      <ng-container matColumnDef="customerName">
        <th mat-header-cell *matHeaderCellDef>Customer Name</th>
        <td mat-cell *matCellDef="let order">
          <div class="customer-info">
            <img [src]="getCustomerAvatar(order)" [alt]="getCustomerName(order)" class="customer-avatar">
            <div class="customer-details">
              <div class="customer-name">{{ getCustomerName(order) }}</div>
              <div class="customer-type">{{ getCustomerType(order) }}</div>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Order ID Column -->
      <ng-container matColumnDef="orderId">
        <th mat-header-cell *matHeaderCellDef>Order Id</th>
        <td mat-cell *matCellDef="let order">
          <div class="order-id">{{ order.orderNumber }}</div>
          <div class="order-date">{{ order.orderDate | date:'MMM dd, yyyy' }}</div>
        </td>
      </ng-container>

      <!-- Amount Column -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let order">
          <div class="amount">{{ order.totalAmount | currency:'USD':'symbol':'1.2-2' }}</div>
          <div class="payment-method">{{ getPaymentMethod(order) }}</div>
        </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let order">
          <span class="status-badge" [ngClass]="getStatusClass(order.status)">
            {{ order.status }}
          </span>
        </td>
      </ng-container>

      <!-- Action Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let order">
          <button mat-icon-button [matMenuTriggerFor]="actionMenu" class="action-menu-btn">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #actionMenu="matMenu">
            <button mat-menu-item [routerLink]="['/admin/orders', order.id]">
              <mat-icon>visibility</mat-icon>
              Details
            </button>
            <button mat-menu-item (click)="updateOrderStatus(order)">
              <mat-icon>edit</mat-icon>
              Update Status
            </button>
            <button mat-menu-item (click)="printOrder(order)">
              <mat-icon>print</mat-icon>
              Print
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <!-- Pagination -->
    <div class="pagination-container">
      <div class="pagination-info">
        <span class="pagination-text">
          <mat-icon>chevron_left</mat-icon>
          Previous
        </span>
        <div class="page-numbers">
          <span class="page-number active">1</span>
          <span class="page-number">2</span>
          <span class="page-number">10</span>
          <span class="page-number">12</span>
          <span class="page-number">13</span>
          <span class="page-number">14</span>
        </div>
        <span class="pagination-text">
          Next
          <mat-icon>chevron_right</mat-icon>
        </span>
      </div>
    </div>
  </div>
</div>
